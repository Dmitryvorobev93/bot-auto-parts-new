<!DOCTYPE html>
<html>
<head>
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–æ—Ç–∞</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .form-group { margin: 10px 0; }
        button { margin: 5px; }
    </style>
</head>
<body>
    <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏</h1>

    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
    <form id="addForm">
        <input type="text" name="article" placeholder="–ê—Ä—Ç–∏–∫—É–ª" required>
        <input type="text" name="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
        <input type="text" name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
        <input type="number" name="price" placeholder="–¶–µ–Ω–∞" step="0.01" required>
        <input type="text" name="category" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è">
        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>

    <h2>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>
    <table id="partsTable">
        <thead>
            <tr>
                <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
        async function loadParts() {
            const response = await fetch('/admin/parts');
            const parts = await response.json();
            
            const tbody = document.querySelector('#partsTable tbody');
            tbody.innerHTML = '';
            
            parts.forEach(part => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${part.article}</td>
                    <td>${part.name}</td>
                    <td>${part.price} —Ä—É–±.</td>
                    <td>${part.category}</td>
                    <td>
                        <button onclick="editPart('${part.article}')">‚úèÔ∏è</button>
                        <button onclick="deletePart('${part.article}')">üóëÔ∏è</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
        document.getElementById('addForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            const response = await fetch('/admin/parts/add', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            
            if (response.ok) {
                alert('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!');
                e.target.reset();
                loadParts();
            }
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        loadParts();
    </script>
</body>
</html>